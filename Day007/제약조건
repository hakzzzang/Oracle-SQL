
#14장 제약조건
#테이블 생성 시 NOT NULL 값 설정
CREATE TABLE TABLE_NOTNULL(
    LOGIN_ID    VARCHAR2(20) NOT NULL,
    LOGIN_PWD   VARCHAR2(20) NOT NULL,
    TEL         VARCHAR2(20)
);


INSERT INTO TABLE_NOTNULL
VALUES('TEST_ID_01', '1234', '010-1234-5678');

INSERT INTO TABLE_NOTNULL
VALUES('TEST_ID_02', '1234', '010-1234-5678');

SELECT * FROM TABLE_NOTNULL;

#나의 계정의 제약을 확인해 봅시다.
#14-5
SELECT OWNER,CONSTRAINT_NAME, CONSTRAINT_TYPE, TABLE_NAME
FROM USER_CONSTRAINTS;

#테이블을 만들 때 제약조건의 이름을 지정해서 만들기
CREATE TABLE TABLE_NOTNULL2(
    LOGIN_ID    VARCHAR2(20) CONSTRAINT MY_LOGID NOT NULL,
    LOGIN_PWD   VARCHAR2(20) CONSTRAINT MY_LOGPWD NOT NULL,  
    TEL         VARCHAR2(20)
);

#테이블에서 제약조건이 없는 컬럼을 제약조건 지정하기
ALTER TABLE TABLE_NOTNULL
MODIFY TEL NULL ;

DESC TABLE_NOTNULL;

SELECT * FROM TABLE_NOTNULL;

#FOREIGN KEY 지정하기
#14-39 DEPT_FT 테이블 생성하기
DROP TABLE DEPT_FK;
CREATE TABLE DEPT_FK(
    DEPTNO NUMBER(2) CONSTRAINT DEPTFK_DEPTNO_PK PRIMARY KEY,
    DNAME  VARCHAR2(14),
    LOC    VARCHAR2(11)
);

#14-40
CREATE TABLE EMP_PK(
    #...
    DEPTNO NUMBER(2) CONSTRAINT EMPFK_DEPTNO_FK 
           REFERENCES DEPT_FK(DEPTNO)
);
